<!doctype html>
<html lang="en">
    <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Virtual Try-On Interface</title>
    <meta name="description" content="AI-powered virtual clothing try-on using advanced machine learning" />
    <meta name="keywords" content="virtual try-on, AI fashion, clothing simulation" />

    <!-- Preconnect to external resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@300;400;500;600;700&display=swap"
        rel="stylesheet"
    />

    <!-- Inline CSS -->
    <style>
        /* Modern Liquid Glass Theme - Virtual Try-On Interface */

        /* Import Google Fonts */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@300;400;500;600;700&display=swap');

        /* CSS Variables for Liquid Glass Theme */
        :root {
          /* Glass Colors */
          --glass-primary: rgba(255, 255, 255, 0.1);
          --glass-secondary: rgba(255, 255, 255, 0.05);
          --glass-accent: rgba(139, 69, 255, 0.2);
          --glass-hover: rgba(255, 255, 255, 0.15);

          /* Gradients */
          --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          --gradient-secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
          --gradient-glass: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
          --gradient-purple: linear-gradient(135deg, #8B5FBF 0%, #6A4C93 100%);
          --gradient-blue: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          --gradient-mesh: radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                           radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
                           radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.3) 0%, transparent 50%);

          /* Colors */
          --text-primary: #ffffff;
          --text-secondary: rgba(255, 255, 255, 0.8);
          --text-accent: #8B5FBF;
          --border-glass: rgba(255, 255, 255, 0.2);
          --shadow-glass: 0 8px 32px rgba(0, 0, 0, 0.3);
          --shadow-hover: 0 16px 64px rgba(0, 0, 0, 0.4);

          /* Spacing */
          --spacing-xs: 0.5rem;
          --spacing-sm: 1rem;
          --spacing-md: 1.5rem;
          --spacing-lg: 2rem;
          --spacing-xl: 3rem;

          /* Border Radius */
          --radius-sm: 12px;
          --radius-md: 20px;
          --radius-lg: 28px;
          --radius-xl: 36px;

          /* Animations */
          --animation-fast: 0.2s ease-out;
          --animation-normal: 0.3s ease-out;
          --animation-slow: 0.5s ease-out;
          --animation-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        /* Reset and Base Styles */
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }

        body {
          font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
          background: #0a0a0f;
          background-image: var(--gradient-mesh);
          min-height: 100vh;
          color: var(--text-primary);
          overflow-x: hidden;
          line-height: 1.6;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

        /* Animated Background */
        body::before {
          content: '';
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background:
            radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.4) 0%, transparent 50%),
            radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.4) 0%, transparent 50%),
            radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.4) 0%, transparent 50%);
          animation: backgroundShift 20s ease-in-out infinite;
          z-index: -1;
        }

        @keyframes backgroundShift {
          0%, 100% { transform: scale(1) rotate(0deg); }
          50% { transform: scale(1.1) rotate(2deg); }
        }

        /* Floating Orbs Animation */
        .floating-orbs {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          pointer-events: none;
          z-index: -1;
        }

        .orb {
          position: absolute;
          border-radius: 50%;
          background: linear-gradient(45deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
          backdrop-filter: blur(20px);
          animation: float 20s infinite ease-in-out;
        }

        .orb:nth-child(1) {
          width: 300px;
          height: 300px;
          top: 10%;
          left: 10%;
          animation-delay: 0s;
        }

        .orb:nth-child(2) {
          width: 200px;
          height: 200px;
          top: 70%;
          right: 10%;
          animation-delay: -7s;
        }

        .orb:nth-child(3) {
          width: 150px;
          height: 150px;
          bottom: 20%;
          left: 60%;
          animation-delay: -14s;
        }

        @keyframes float {
          0%, 100% { transform: translateY(0px) rotate(0deg); }
          33% { transform: translateY(-30px) rotate(120deg); }
          66% { transform: translateY(20px) rotate(240deg); }
        }

        /* Glass Container */
        .container {
          max-width: 1400px;
          margin: 0 auto;
          padding: var(--spacing-lg);
          position: relative;
          z-index: 1;
        }

        /* Glass Card */
        .glass-card {
          background: var(--gradient-glass);
          backdrop-filter: blur(20px);
          -webkit-backdrop-filter: blur(20px);
          border: 1px solid var(--border-glass);
          border-radius: var(--radius-lg);
          box-shadow: var(--shadow-glass);
          position: relative;
          overflow: hidden;
        }

        .glass-card::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          height: 1px;
          background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
        }

        /* Header */
        .header {
          background: var(--gradient-primary);
          padding: var(--spacing-xl);
          text-align: center;
          position: relative;
          overflow: hidden;
          border-radius: var(--radius-lg) var(--radius-lg) 0 0;
        }

        .header::before {
          content: '';
          position: absolute;
          top: -50%;
          left: -50%;
          width: 200%;
          height: 200%;
          background: conic-gradient(from 0deg, transparent, rgba(255, 255, 255, 0.1), transparent);
          animation: rotate 20s linear infinite;
          pointer-events: none;
        }

        @keyframes rotate {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }

        .header h1 {
          font-family: 'Space Grotesk', sans-serif;
          font-size: clamp(2.5rem, 5vw, 4rem);
          font-weight: 700;
          margin-bottom: var(--spacing-sm);
          background: linear-gradient(135deg, #ffffff 0%, #e0e7ff 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
          position: relative;
          z-index: 1;
          text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
          animation: glow 3s ease-in-out infinite alternate;
        }

        @keyframes glow {
          from { filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.3)); }
          to { filter: drop-shadow(0 0 40px rgba(255, 255, 255, 0.5)); }
        }

        .header p {
          font-size: 1.2rem;
          opacity: 0.9;
          position: relative;
          z-index: 1;
          animation: fadeInUp 1s ease-out 0.5s both;
        }

        .auth-info {
          background: rgba(255, 255, 255, 0.1);
          padding: var(--spacing-sm) var(--spacing-md);
          border-radius: var(--radius-sm);
          margin-top: var(--spacing-md);
          font-size: 0.9rem;
          border: 1px solid rgba(255, 255, 255, 0.2);
          position: relative;
          z-index: 1;
          animation: fadeInUp 1s ease-out 0.7s both;
        }

        /* Main Content */
        .main-content {
          padding: var(--spacing-xl);
        }

        /* Instructions */
        .instructions {
          background: linear-gradient(135deg, rgba(139, 95, 191, 0.2) 0%, rgba(106, 76, 147, 0.1) 100%);
          border: 1px solid rgba(139, 95, 191, 0.3);
          border-radius: var(--radius-md);
          padding: var(--spacing-lg);
          margin-bottom: var(--spacing-xl);
          backdrop-filter: blur(10px);
          animation: slideInUp 0.8s ease-out;
        }

        .instructions h4 {
          font-family: 'Space Grotesk', sans-serif;
          color: #c7b3f0;
          margin-bottom: var(--spacing-sm);
          font-size: 1.3rem;
          font-weight: 600;
        }

        .instructions ul {
          color: var(--text-secondary);
          padding-left: var(--spacing-lg);
        }

        .instructions li {
          margin-bottom: var(--spacing-xs);
          position: relative;
        }

        .instructions li::marker {
          color: #8B5FBF;
        }

        /* Upload Section */
        .upload-section {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
          gap: var(--spacing-xl);
          margin-bottom: var(--spacing-xl);
        }

        /* Upload Cards */
        .upload-card {
          background: var(--gradient-glass);
          backdrop-filter: blur(15px);
          -webkit-backdrop-filter: blur(15px);
          border: 2px dashed var(--border-glass);
          border-radius: var(--radius-lg);
          padding: var(--spacing-xl);
          text-align: center;
          position: relative;
          overflow: hidden;
          transition: all var(--animation-normal);
          cursor: pointer;
          animation: fadeInUp 0.6s ease-out;
        }

        .upload-card:nth-child(2) {
          animation-delay: 0.2s;
        }

        .upload-card::before {
          content: '';
          position: absolute;
          top: 0;
          left: -100%;
          width: 100%;
          height: 100%;
          background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
          transition: left 0.6s ease;
        }

        .upload-card:hover::before {
          left: 100%;
        }

        .upload-card:hover {
          border-color: rgba(139, 95, 191, 0.6);
          background: linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0.08) 100%);
          transform: translateY(-8px) scale(1.02);
          box-shadow: 0 20px 60px rgba(139, 95, 191, 0.3);
        }

        .upload-card h3 {
          font-family: 'Space Grotesk', sans-serif;
          color: var(--text-primary);
          margin-bottom: var(--spacing-sm);
          font-size: 1.4rem;
          font-weight: 600;
        }

        .upload-card p {
          color: var(--text-secondary);
          margin-bottom: var(--spacing-lg);
          font-size: 1rem;
        }

        /* Upload Button */
        .upload-button {
          background: var(--gradient-primary);
          color: white;
          border: none;
          padding: var(--spacing-md) var(--spacing-xl);
          border-radius: var(--radius-xl);
          cursor: pointer;
          font-size: 1rem;
          font-weight: 600;
          font-family: 'Inter', sans-serif;
          display: inline-flex;
          align-items: center;
          gap: var(--spacing-xs);
          transition: all var(--animation-normal);
          position: relative;
          overflow: hidden;
          box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .upload-button::before {
          content: '';
          position: absolute;
          top: 0;
          left: -100%;
          width: 100%;
          height: 100%;
          background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
          transition: left 0.6s ease;
        }

        .upload-button:hover::before {
          left: 100%;
        }

        .upload-button:hover {
          transform: translateY(-3px);
          box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
          background: linear-gradient(135deg, #7c9df5 0%, #8b6bb1 100%);
        }

        .upload-button:active {
          transform: translateY(-1px);
        }

        /* Image Preview */
        .image-preview {
          margin-top: var(--spacing-lg);
          max-width: 100%;
          height: 200px;
          object-fit: cover;
          border-radius: var(--radius-md);
          box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
          display: none;
          border: 2px solid rgba(255, 255, 255, 0.2);
          transition: all var(--animation-normal);
          animation: zoomIn 0.5s ease-out;
        }

        .image-preview:hover {
          transform: scale(1.05);
          box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
        }

        /* Process Section */
        .process-section {
          text-align: center;
          margin-bottom: var(--spacing-xl);
        }

        .process-button {
          background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
          color: white;
          border: none;
          padding: var(--spacing-lg) var(--spacing-xl);
          border-radius: var(--radius-xl);
          cursor: pointer;
          font-size: 1.3rem;
          font-weight: 700;
          font-family: 'Space Grotesk', sans-serif;
          text-transform: uppercase;
          letter-spacing: 1px;
          transition: all var(--animation-normal);
          position: relative;
          overflow: hidden;
          box-shadow: 0 12px 35px rgba(40, 167, 69, 0.3);
          animation: pulse 2s infinite;
        }

        @keyframes pulse {
          0% { box-shadow: 0 12px 35px rgba(40, 167, 69, 0.3); }
          50% { box-shadow: 0 12px 35px rgba(40, 167, 69, 0.6); }
          100% { box-shadow: 0 12px 35px rgba(40, 167, 69, 0.3); }
        }

        .process-button::before {
          content: '';
          position: absolute;
          top: 0;
          left: -100%;
          width: 100%;
          height: 100%;
          background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
          transition: left 0.6s ease;
        }

        .process-button:hover::before {
          left: 100%;
        }

        .process-button:hover:not(:disabled) {
          transform: translateY(-5px) scale(1.05);
          box-shadow: 0 20px 50px rgba(40, 167, 69, 0.4);
          background: linear-gradient(135deg, #34ce57 0%, #2dd4aa 100%);
        }

        .process-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
          transform: none;
          box-shadow: 0 8px 20px rgba(40, 167, 69, 0.2);
          animation: none;
        }

        /* Messages */
        .error-message, .success-message {
          padding: var(--spacing-md);
          border-radius: var(--radius-md);
          margin: var(--spacing-md) 0;
          border: 1px solid;
          display: none;
          animation: slideInDown 0.5s ease-out;
          backdrop-filter: blur(10px);
        }

        .error-message {
          background: rgba(248, 113, 113, 0.2);
          color: #fca5a5;
          border-color: rgba(248, 113, 113, 0.4);
        }

        .success-message {
          background: rgba(34, 197, 94, 0.2);
          color: #86efac;
          border-color: rgba(34, 197, 94, 0.4);
        }

        /* Loading Animation */
        .loading {
          display: none;
          text-align: center;
          padding: var(--spacing-xl);
          animation: fadeIn 0.5s ease-out;
        }

        .spinner {
          width: 80px;
          height: 80px;
          margin: 0 auto var(--spacing-lg);
          border: 4px solid rgba(255, 255, 255, 0.1);
          border-top: 4px solid #8B5FBF;
          border-radius: 50%;
          animation: spin 1s linear infinite;
          position: relative;
        }

        .spinner::before {
          content: '';
          position: absolute;
          top: -4px;
          left: -4px;
          right: -4px;
          bottom: -4px;
          border: 4px solid transparent;
          border-top: 4px solid rgba(139, 95, 191, 0.3);
          border-radius: 50%;
          animation: spin 2s linear infinite reverse;
        }

        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }

        .loading p {
          color: var(--text-secondary);
          font-size: 1.2rem;
          margin-bottom: var(--spacing-sm);
          font-weight: 500;
        }

        .loading small {
          color: rgba(255, 255, 255, 0.6);
          font-size: 0.9rem;
        }

        /* Results Section */
        .results-section {
          background: var(--gradient-glass);
          backdrop-filter: blur(15px);
          border-radius: var(--radius-lg);
          padding: var(--spacing-xl);
          text-align: center;
          display: none;
          border: 1px solid var(--border-glass);
          animation: zoomIn 0.8s var(--animation-bounce);
        }

        .results-section h3 {
          font-family: 'Space Grotesk', sans-serif;
          color: var(--text-primary);
          margin-bottom: var(--spacing-lg);
          font-size: 1.8rem;
          font-weight: 600;
        }

        .result-image {
          max-width: 100%;
          max-height: 600px;
          border-radius: var(--radius-lg);
          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
          border: 2px solid rgba(255, 255, 255, 0.2);
          transition: all var(--animation-normal);
          animation: imageReveal 1s ease-out;
        }

        .result-image:hover {
          transform: scale(1.05);
          box-shadow: 0 30px 80px rgba(0, 0, 0, 0.5);
        }

        /* Additional Modern UI Enhancements */

        /* Skip Link for Accessibility */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 6px;
            background: var(--gradient-primary);
            color: white;
            padding: 8px;
            border-radius: 4px;
            text-decoration: none;
            z-index: 9999;
            transition: top 0.3s;
        }

        .skip-link:focus {
            top: 6px;
        }

        /* Enhanced Upload Icons */
        .upload-icon {
            margin-bottom: var(--spacing-sm);
            opacity: 0.6;
            transition: all var(--animation-normal);
        }

        .upload-card:hover .upload-icon {
            opacity: 1;
            transform: scale(1.1);
            color: #8b5fbf;
        }

        /* Step Numbers in Instructions */
        .step-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            background: var(--gradient-primary);
            color: white;
            border-radius: 50%;
            font-size: 0.8rem;
            font-weight: 600;
            margin-right: var(--spacing-xs);
            flex-shrink: 0;
        }

        /* API Provider Status Section */
        .provider-status {
            margin: var(--spacing-lg) 0;
        }

        .status-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: var(--radius-lg);
            padding: var(--spacing-md);
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            transition: all var(--animation-normal);
        }

        .status-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 32px rgba(139, 95, 191, 0.2);
            border-color: rgba(139, 95, 191, 0.3);
        }

        .status-content h4 {
            margin: 0 0 var(--spacing-xs) 0;
            color: var(--text-primary);
            font-size: 1.1rem;
            font-weight: 600;
        }

        .provider-info {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            flex-wrap: wrap;
        }

        .provider-badge {
            display: inline-flex;
            align-items: center;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all var(--animation-normal);
        }

        .provider-badge.ai-processing {
            background: linear-gradient(135deg, #4ade80, #22c55e);
            color: white;
            box-shadow: 0 2px 8px rgba(74, 222, 128, 0.3);
        }

        .provider-badge.fallback {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: white;
            box-shadow: 0 2px 8px rgba(251, 191, 36, 0.3);
        }

        .provider-badge.standard {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: white;
            box-shadow: 0 2px 8px rgba(99, 102, 241, 0.3);
        }

        .provider-badge.loading {
            background: linear-gradient(135deg, #8b5fbf, #a77bcf);
            color: white;
            animation: pulse 2s infinite;
        }

        .status-text {
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-style: italic;
        }

        /* Enhanced Progress Bar */
        .upload-progress {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            overflow: hidden;
            margin-top: var(--spacing-sm);
        }

        .progress-bar {
            height: 100%;
            background: var(--gradient-primary);
            width: 0%;
            border-radius: 2px;
            transition: width 0.3s ease;
            animation: progressPulse 2s infinite;
        }

        @keyframes progressPulse {
            0% {
                opacity: 1;
            }
            50% {
                opacity: 0.7;
            }
            100% {
                opacity: 1;
            }
        }

        /* Enhanced Button Effects */
        .button-icon,
        .button-sparkle {
            transition: all var(--animation-normal);
        }

        .process-button:hover .button-icon {
            transform: rotate(15deg) scale(1.1);
        }

        .process-button:hover .button-sparkle {
            animation: sparkle 0.6s ease-in-out;
        }

        @keyframes sparkle {
            0%,
            100% {
                transform: scale(1) rotate(0deg);
            }
            50% {
                transform: scale(1.2) rotate(180deg);
            }
        }

        /* Process Hint Styling */
        .process-hint {
            margin-top: var(--spacing-sm);
            color: var(--text-secondary);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-xs);
            text-align: center;
        }

        .hint-icon {
            animation: pulse 2s infinite;
        }

        /* Enhanced Spinner */
        .spinner-container {
            position: relative;
            display: inline-block;
            margin-bottom: var(--spacing-lg);
        }

        .spinner-glow {
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            border: 2px solid transparent;
            border-radius: 50%;
            background: conic-gradient(
                from 0deg,
                transparent,
                rgba(139, 95, 191, 0.4),
                transparent
            );
            animation: spinGlow 3s linear infinite;
        }

        @keyframes spinGlow {
            0% {
                transform: rotate(0deg);
                filter: hue-rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
                filter: hue-rotate(360deg);
            }
        }

        /* Loading Steps */
        .loading-steps {
            display: flex;
            justify-content: center;
            gap: var(--spacing-lg);
            margin-top: var(--spacing-lg);
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--spacing-xs);
            opacity: 0.5;
            transition: all var(--animation-normal);
        }

        .step.active {
            opacity: 1;
        }

        .step-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--gradient-primary);
            animation: dotPulse 2s infinite;
        }

        .step.active .step-dot {
            animation: dotPulse 1s infinite;
        }

        @keyframes dotPulse {
            0%,
            100% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.2);
                opacity: 0.7;
            }
        }

        .step-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            text-align: center;
        }

        /* Results Header */
        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-lg);
            flex-wrap: wrap;
            gap: var(--spacing-sm);
        }

        .results-actions {
            display: flex;
            gap: var(--spacing-sm);
        }

        /* Action Buttons */
        .action-button {
            background: var(--gradient-glass);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-glass);
            color: var(--text-primary);
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-xs);
            transition: all var(--animation-normal);
        }

        .action-button:hover {
            background: var(--glass-hover);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        /* Secondary Button */
        .secondary-button {
            background: transparent;
            border: 2px solid var(--border-glass);
            color: var(--text-secondary);
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-xs);
            transition: all var(--animation-normal);
        }

        .secondary-button:hover {
            border-color: #8b5fbf;
            color: #8b5fbf;
            background: rgba(139, 95, 191, 0.1);
        }

        /* Result Container */
        .result-container {
            position: relative;
            display: inline-block;
            margin-bottom: var(--spacing-lg);
        }

        .result-overlay {
            position: absolute;
            top: var(--spacing-sm);
            right: var(--spacing-sm);
            z-index: 2;
        }

        .result-badge {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            color: white;
            padding: 6px 12px;
            border-radius: var(--radius-sm);
            font-size: 0.8rem;
            font-weight: 500;
        }

        .badge-text {
            color: white;
        }

        /* Results Footer */
        .results-footer {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .results-note {
            color: var(--text-secondary);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            text-align: center;
        }

        .note-icon {
            display: inline-block;
        }

        /* Body Measurements Section */
        .measurements-section {
            background: var(--glass-primary);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-glass);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            margin: var(--spacing-xl) 0;
            box-shadow: var(--shadow-glass);
            transition: all var(--animation-normal);
        }

        .measurements-section:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .measurements-header {
            text-align: center;
            margin-bottom: var(--spacing-lg);
        }

        .measurements-header h3 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 2rem;
            font-weight: 900;
            margin-bottom: var(--spacing-sm);
            color: #fff;
            text-shadow: 0 2px 8px rgba(40,40,40,0.5);
        }

        .measurements-icon {
            font-size: 1.5rem;
            margin-right: var(--spacing-sm);
        }

        .measurements-header p {
            color: var(--text-secondary);
            font-size: 1rem;
        }

        .measurements-form {
            margin-bottom: var(--spacing-lg);
        }

        .measurement-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
        }

        .input-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-md);
            padding: var(--spacing-lg);
            transition: all var(--animation-normal);
        }

        .input-card:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .input-label {
            display: flex;
            align-items: center;
            font-weight: 600;
            margin-bottom: var(--spacing-sm);
            color: var(--text-primary);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .input-label svg {
            margin-right: var(--spacing-xs);
            opacity: 0.8;
        }

        .measurement-input,
        .measurement-select {
            width: 100%;
            padding: var(--spacing-sm) var(--spacing-md);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: var(--radius-sm);
            color: var(--text-primary);
            font-size: 1.1rem;
            font-weight: 500;
            transition: all var(--animation-normal);
            outline: none;
        }

        .measurement-input:focus,
        .measurement-select:focus {
            background: rgba(255, 255, 255, 0.15);
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
        }

        .measurement-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .input-hint {
            display: block;
            margin-top: var(--spacing-xs);
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.8rem;
        }

        .prediction-actions {
            text-align: center;
            margin: var(--spacing-lg) 0;
        }

        .predict-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: var(--spacing-md) var(--spacing-xl);
            border-radius: var(--radius-lg);
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            font-family: 'Space Grotesk', sans-serif;
            transition: all var(--animation-normal);
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .predict-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
            background: linear-gradient(135deg, #7c9df5 0%, #8b6bb1 100%);
        }

        .predict-button .button-icon {
            margin-right: var(--spacing-xs);
        }

        .predictions-display {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-md);
            padding: var(--spacing-lg);
            margin-top: var(--spacing-lg);
            animation: fadeInUp 0.5s ease-out;
        }

        .predictions-header {
            text-align: center;
            margin-bottom: var(--spacing-lg);
        }

        .predictions-header h4 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.6rem;
            font-weight: 800;
            color: #fff;
            margin-bottom: var(--spacing-sm);
            text-shadow: 0 2px 8px rgba(40,40,40,0.5);
        }

        .predictions-icon {
            font-size: 1.2rem;
            margin-right: var(--spacing-xs);
        }

        .predictions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--spacing-md);
        }

        .prediction-item {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-sm);
            padding: var(--spacing-md);
            text-align: center;
            transition: all var(--animation-normal);
        }

        .prediction-item:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateY(-2px);
        }

        .prediction-label {
            font-size: 1rem;
            color: #fff;
            margin-bottom: var(--spacing-xs);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 700;
            text-shadow: 0 1px 4px rgba(40,40,40,0.4);
        }

        .prediction-value {
            font-size: 1.5rem;
            font-weight: 900;
            color: #fff;
            background: none;
            text-shadow: 0 2px 8px rgba(40,40,40,0.5);
        }

        /* Message Section */
        .messages-section {
            margin: var(--spacing-lg) 0;
        }

        /* Animations */
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }

        @keyframes fadeInUp {
          from {
            opacity: 0;
            transform: translateY(30px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        @keyframes slideInUp {
          from {
            opacity: 0;
            transform: translateY(50px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        @keyframes slideInDown {
          from {
            opacity: 0;
            transform: translateY(-30px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        @keyframes zoomIn {
          from {
            opacity: 0;
            transform: scale(0.8);
          }
          to {
            opacity: 1;
            transform: scale(1);
          }
        }

        @keyframes imageReveal {
          from {
            opacity: 0;
            transform: scale(0.9) translateY(20px);
            filter: blur(10px);
          }
          to {
            opacity: 1;
            transform: scale(1) translateY(0);
            filter: blur(0);
          }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
          .container {
            padding: var(--spacing-sm);
          }

          .upload-section {
            grid-template-columns: 1fr;
            gap: var(--spacing-lg);
          }

          .header {
            padding: var(--spacing-lg);
          }

          .header h1 {
            font-size: 2.5rem;
          }

          .main-content {
            padding: var(--spacing-lg);
          }

          .upload-card {
            padding: var(--spacing-lg);
          }

          .process-button {
            font-size: 1.1rem;
            padding: var(--spacing-md) var(--spacing-lg);
          }

          .results-header {
            flex-direction: column;
            text-align: center;
          }

          .results-actions {
            justify-content: center;
          }

          .loading-steps {
            flex-direction: column;
            gap: var(--spacing-sm);
          }

          .step {
            flex-direction: row;
            justify-content: center;
          }

          .step-label {
            text-align: left;
          }

          .status-card {
            flex-direction: column;
            text-align: center;
            gap: var(--spacing-sm);
          }

          .provider-info {
            justify-content: center;
          }
        }

        @media (max-width: 480px) {
          .upload-section {
            grid-template-columns: 1fr;
          }

          .header h1 {
            font-size: 2rem;
          }

          .upload-card {
            padding: var(--spacing-md);
          }

          .process-button {
            font-size: 1rem;
            padding: var(--spacing-sm) var(--spacing-md);
          }

          .results-actions {
            flex-direction: column;
            width: 100%;
          }

          .action-button {
            justify-content: center;
          }

          .results-footer {
            gap: var(--spacing-md);
          }

          .results-note {
            text-align: center;
            flex-direction: column;
            gap: var(--spacing-xs);
          }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
          width: 8px;
        }

        ::-webkit-scrollbar-track {
          background: rgba(255, 255, 255, 0.1);
          border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
          background: var(--gradient-primary);
          border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
          background: var(--gradient-secondary);
        }

        /* Selection */
        ::selection {
          background: rgba(139, 95, 191, 0.3);
          color: white;
        }

        /* Focus Styles */
        *:focus {
          outline: 2px solid rgba(139, 95, 191, 0.5);
          outline-offset: 2px;
        }

        /* Hidden Input */
        .upload-input {
          display: none;
        }

        /* Enhanced CSS additions */
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }

        .upload-card.dragover {
            transform: scale(1.05) !important;
            box-shadow: 0 25px 70px rgba(139, 95, 191, 0.4) !important;
        }

        .image-preview {
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .process-button:not(:disabled):hover {
            animation: pulse 1s infinite !important;
        }

        @keyframes ripple {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(139, 95, 191, 0.8);
            border-radius: 50%;
            pointer-events: none;
            animation: particle-float 2s ease-out forwards;
        }

        @keyframes particle-float {
            0% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) scale(0);
                opacity: 0;
            }
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* Loading text shimmer */
        .loading-text {
            background: linear-gradient(90deg, #ffffff, #8b5fbf, #ffffff);
            background-size: 200% 100%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: textShimmer 2s ease-in-out infinite;
        }

        @keyframes textShimmer {
            0% {
                background-position: -200% 0;
            }
            100% {
                background-position: 200% 0;
            }
        }

        /* Hide empty icon spans */
        .hint-icon:empty,
        .results-icon:empty,
        .button-sparkle:empty {
            display: none;
        }
    </style>

    <!-- Favicon -->
    <link
        rel="icon"
        type="image/svg+xml"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='40' fill='%238B5FBF'/></svg>"
    />

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#8B5FBF" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <!-- OpenGraph Meta Tags - FIXED: Removed leading slash from path parameter -->
    <meta property="og:title" content="Virtual Try-On Interface" />
    <meta property="og:description" content="Experience AI-powered virtual clothing try-on" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="{{ url_for('static', path='images/og-image.jpg') }}" />

    <!-- Structured Data -->
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebApplication",
            "name": "Virtual Try-On Interface",
            "description": "AI-powered virtual clothing try-on application",
            "applicationCategory": "LifestyleApplication",
            "operatingSystem": "Web"
        }
    </script>
</head>

    <body>
        <!-- Floating Orbs Background (added by JavaScript) -->

        <!-- Main Container -->
        <div class="container">
            <!-- Glass Card Container -->
            <div class="glass-card">
                <!-- Header Section -->
                <header class="header">
                    <h1>Virtual Try-On</h1>
                    <p>Transform your style with AI-powered virtual fitting</p>
                    <div class="auth-info">
                        Authenticated as: <strong>{{ username }}</strong>
                    </div>
                </header>

                <!-- Main Content -->
                <main class="main-content">
                    <!-- Instructions Section -->
                    <section class="instructions">
                        <h4>How to Use</h4>
                        <ul>
                            <li>
                                <span class="step-number">1</span>
                                Upload a clear photo of yourself (preferably
                                full body or upper body)
                            </li>
                            <li>
                                <span class="step-number">2</span>
                                Upload an image of the garment you want to try
                                on
                            </li>
                            <li>
                                <span class="step-number">3</span>
                                Click "Generate Try-On" and wait for processing
                                (1-3 minutes)
                            </li>
                            <li>
                                <span class="step-number">4</span>
                                View your AI-generated virtual try-on result
                            </li>
                        </ul>
                    </section>

                    <!-- API Provider Status -->
                    <section class="provider-status">
                        <div class="status-card" id="providerStatus">
                            <div class="status-content">
                                <h4>AI Provider Status</h4>
                                <div class="provider-info" id="providerInfo">
                                    <span
                                        class="provider-badge"
                                        id="providerBadge"
                                        >Loading...</span
                                    >
                                    <span class="status-text" id="statusText"
                                        >Checking API availability...</span
                                    >
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Upload Section -->
                    <section class="upload-section">
                        <!-- Person Image Upload -->
                        <div class="upload-card" id="personCard">
                            <div class="upload-icon">
                                <svg
                                    width="48"
                                    height="48"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                        d="M12 12C14.7614 12 17 9.76142 17 7C17 4.23858 14.7614 2 12 2C9.23858 2 7 4.23858 7 7C7 9.76142 9.23858 12 12 12Z"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                    />
                                    <path
                                        d="M20.59 22C20.59 22 16.74 15 12 15C7.26 15 3.41 18.13 3.41 22"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                    />
                                </svg>
                            </div>
                            <h3>Upload Person Image</h3>
                            <p>
                                Select a clear photo of yourself for the best
                                results
                            </p>
                            <input
                                type="file"
                                id="personImage"
                                class="upload-input"
                                accept="image/jpeg,image/png,image/jpg"
                                aria-label="Upload person image"
                            />
                            <button
                                type="button"
                                class="upload-button"
                                aria-label="Choose person image file"
                            >
                                <svg
                                    width="20"
                                    height="20"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                        d="M14.2639 15.9375L12.5958 14.2834C12.267 13.9542 11.733 13.9542 11.4042 14.2834L9.73611 15.9375C9.40694 16.2667 9.40694 16.8 9.73611 17.1292C10.0653 17.4583 10.5993 17.4583 10.9285 17.1292L11.25 16.8125V21.375C11.25 21.8438 11.6042 22.2292 12.0625 22.2292C12.5208 22.2292 12.875 21.8438 12.875 21.375V16.8125L13.1965 17.1292C13.5257 17.4583 14.0597 17.4583 14.3889 17.1292C14.7181 16.8 14.7181 16.2667 14.2639 15.9375Z"
                                        fill="currentColor"
                                    />
                                    <path
                                        d="M17.5 8.75H15.625V6.875C15.625 3.78125 13.0938 1.25 10 1.25H6.875C3.78125 1.25 1.25 3.78125 1.25 6.875V17.5C1.25 20.5938 3.78125 23.125 6.875 23.125H17.5C20.5938 23.125 23.125 20.5938 23.125 17.5V14.375C23.125 11.2812 20.5938 8.75 17.5 8.75Z"
                                        fill="currentColor"
                                    />
                                </svg>
                                Choose Person Image
                            </button>
                            <img
                                id="personPreview"
                                class="image-preview"
                                alt="Person preview"
                                loading="lazy"
                            />
                            <div
                                class="upload-progress"
                                id="personProgress"
                                style="display: none"
                            >
                                <div class="progress-bar"></div>
                            </div>
                        </div>

                        <!-- Garment Image Upload -->
                        <div class="upload-card" id="garmentCard">
                            <div class="upload-icon">
                                <svg
                                    width="48"
                                    height="48"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                        d="M16 4L12 2L8 4V6H16V4Z"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                    />
                                    <path
                                        d="M8 6V20C8 20.5304 8.21071 21.0391 8.58579 21.4142C8.96086 21.7893 9.46957 22 10 22H14C14.5304 22 15.0391 21.7893 15.4142 21.4142C15.7893 21.0391 16 20.5304 16 20V6H8Z"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                    />
                                </svg>
                            </div>
                            <h3>Upload Garment Image</h3>
                            <p>Select the clothing item you want to try on</p>
                            <input
                                type="file"
                                id="garmentImage"
                                class="upload-input"
                                accept="image/jpeg,image/png,image/jpg"
                                aria-label="Upload garment image"
                            />
                            <button
                                type="button"
                                class="upload-button"
                                aria-label="Choose garment image file"
                            >
                                <svg
                                    width="20"
                                    height="20"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                        d="M14.2639 15.9375L12.5958 14.2834C12.267 13.9542 11.733 13.9542 11.4042 14.2834L9.73611 15.9375C9.40694 16.2667 9.40694 16.8 9.73611 17.1292C10.0653 17.4583 10.5993 17.4583 10.9285 17.1292L11.25 16.8125V21.375C11.25 21.8438 11.6042 22.2292 12.0625 22.2292C12.5208 22.2292 12.875 21.8438 12.875 21.375V16.8125L13.1965 17.1292C13.5257 17.4583 14.0597 17.4583 14.3889 17.1292C14.7181 16.8 14.7181 16.2667 14.2639 15.9375Z"
                                        fill="currentColor"
                                    />
                                    <path
                                        d="M17.5 8.75H15.625V6.875C15.625 3.78125 13.0938 1.25 10 1.25H6.875C3.78125 1.25 1.25 3.78125 1.25 6.875V17.5C1.25 20.5938 3.78125 23.125 6.875 23.125H17.5C20.5938 23.125 23.125 20.5938 23.125 17.5V14.375C23.125 11.2812 20.5938 8.75 17.5 8.75Z"
                                        fill="currentColor"
                                    />
                                </svg>
                                Choose Garment Image
                            </button>
                            <img
                                id="garmentPreview"
                                class="image-preview"
                                alt="Garment preview"
                                loading="lazy"
                            />
                            <div
                                class="upload-progress"
                                id="garmentProgress"
                                style="display: none"
                            >
                                <div class="progress-bar"></div>
                            </div>
                        </div>
                    </section>

                    <!-- Body Measurements Section -->
                    <section class="measurements-section">
                        <div class="measurements-header">
                            <h3>
                                <span class="measurements-icon"></span>
                                Body Measurements
                            </h3>
                            <p>Enter your measurements for personalized size predictions</p>
                        </div>
                        
                        <div class="measurements-form">
                            <div class="measurement-group">
                                <div class="input-card">
                                    <label for="height" class="input-label">
                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M12 2V22M8 6L12 2L16 6M8 18L12 22L16 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                        Height (cm)
                                    </label>
                                    <input 
                                        type="number" 
                                        id="height" 
                                        class="measurement-input" 
                                        placeholder="175" 
                                        min="120" 
                                        max="250"
                                        step="0.1"
                                        required
                                        aria-label="Height in centimeters"
                                    />
                                    <small class="input-hint">120-250 cm</small>
                                </div>
                                
                                <div class="input-card">
                                    <label for="weight" class="input-label">
                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M12 2C13.1046 2 14 2.89543 14 4C14 5.10457 13.1046 6 12 6C10.8954 6 10 5.10457 10 4C10 2.89543 10.8954 2 12 2Z" stroke="currentColor" stroke-width="2"/>
                                            <path d="M21 9H3L5 21H19L21 9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            <path d="M16 13V17" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                            <path d="M8 13V17" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                        </svg>
                                        Weight (kg)
                                    </label>
                                    <input 
                                        type="number" 
                                        id="weight" 
                                        class="measurement-input" 
                                        placeholder="70" 
                                        min="30" 
                                        max="300"
                                        step="0.1"
                                        required
                                        aria-label="Weight in kilograms"
                                    />
                                    <small class="input-hint">30-300 kg</small>
                                </div>
                                
                                <div class="input-card">
                                    <label for="gender" class="input-label">
                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                                            <path d="M8 14S9.5 16 12 16S16 14 16 14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                            <path d="M9 9H9.01M15 9H15.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                        </svg>
                                        Gender
                                    </label>
                                    <select 
                                        id="gender" 
                                        class="measurement-select"
                                        aria-label="Select gender for size calculations"
                                    >
                                        <option value="unisex">Unisex</option>
                                        <option value="male">Male</option>
                                        <option value="female">Female</option>
                                    </select>
                                    <small class="input-hint">For size accuracy</small>
                                </div>
                            </div>
                            
                            <div class="prediction-actions">
                                <button
                                    type="button"
                                    class="predict-button"
                                    id="predictButton"
                                    aria-label="Predict body measurements"
                                >
                                    <span class="button-icon"></span>
                                    <span class="button-text">Predict Sizes</span>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Predicted Measurements Display -->
                        <div class="predictions-display" id="predictionsDisplay" style="display: none;">
                            <div class="predictions-header">
                                <h4>
                                    <span class="predictions-icon"></span>
                                    Predicted Measurements
                                </h4>
                            </div>
                            <div class="predictions-grid" id="predictionsGrid">
                                <!-- Predictions will be populated by JavaScript -->
                            </div>
                        </div>
                    </section>

                    <!-- Messages Section -->
                    <section class="messages-section">
                        <div
                            class="error-message"
                            id="errorMessage"
                            role="alert"
                            aria-live="polite"
                        ></div>
                        <div
                            class="success-message"
                            id="successMessage"
                            role="status"
                            aria-live="polite"
                        ></div>
                    </section>

                    <!-- Process Section -->
                    <section class="process-section">
                        <button
                            type="button"
                            class="process-button"
                            id="processButton"
                            disabled
                            aria-label="Generate virtual try-on result"
                        >
                            <span class="button-icon">
                                <svg
                                    width="24"
                                    height="24"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                        d="M13 2L3 14H12L11 22L21 10H12L13 2Z"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                    />
                                </svg>
                            </span>
                            <span class="button-text">Generate Try-On</span>
                            <span class="button-sparkle"></span>
                        </button>
                        <p class="process-hint">
                            <span class="hint-icon"></span>
                            Tip: Use high-quality images for the best results
                        </p>
                    </section>

                    <!-- Loading Section -->
                    <section class="loading" id="loading" aria-live="polite">
                        <div class="spinner-container">
                            <div class="spinner"></div>
                            <div class="spinner-glow"></div>
                        </div>
                        <div class="loading-content">
                            <p class="loading-text">
                                Processing your virtual try-on...
                            </p>
                            <small class="loading-subtext"
                                >This may take 1-3 minutes. Please be
                                patient.</small
                            >
                            <div class="loading-steps">
                                <div class="step active">
                                    <span class="step-dot"></span>
                                    <span class="step-label"
                                        >Analyzing Images</span
                                    >
                                </div>
                                <div class="step">
                                    <span class="step-dot"></span>
                                    <span class="step-label"
                                        >AI Processing</span
                                    >
                                </div>
                                <div class="step">
                                    <span class="step-dot"></span>
                                    <span class="step-label"
                                        >Generating Result</span
                                    >
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Results Section -->
                    <section class="results-section" id="results">
                        <div class="results-header">
                            <h3>
                                <span class="results-icon"></span>
                                Your Virtual Try-On Result
                            </h3>
                            <div class="results-actions">
                                <button
                                    type="button"
                                    class="action-button download-btn"
                                    onclick="downloadResult()"
                                    aria-label="Download result image"
                                >
                                    <svg
                                        width="20"
                                        height="20"
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        xmlns="http://www.w3.org/2000/svg"
                                    >
                                        <path
                                            d="M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15"
                                            stroke="currentColor"
                                            stroke-width="2"
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                        />
                                        <path
                                            d="M7 10L12 15L17 10"
                                            stroke="currentColor"
                                            stroke-width="2"
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                        />
                                        <path
                                            d="M12 15V3"
                                            stroke="currentColor"
                                            stroke-width="2"
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                        />
                                    </svg>
                                    Download
                                </button>
                            </div>
                        </div>
                        <div class="result-container">
                            <img
                                id="resultImage"
                                class="result-image"
                                alt="Virtual try-on result"
                                loading="lazy"
                            />
                            <div class="result-overlay">
                                <div class="result-badge">
                                    <span class="badge-text">AI Generated</span>
                                </div>
                            </div>
                        </div>
                        <div class="results-footer">
                            <p class="results-note">
                                <span class="note-icon"></span>
                                Results may vary based on image quality and
                                garment compatibility
                            </p>
                            <button
                                type="button"
                                class="secondary-button"
                                onclick="resetInterface()"
                                aria-label="Try another combination"
                            >
                                <svg
                                    width="16"
                                    height="16"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                        d="M1 4V10H7"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                    />
                                    <path
                                        d="M3.51 15C4.48 18.09 7.36 20.36 10.82 20.83C17.39 21.72 23 16.64 23 10C23 3.93 18.07 -1 12 1C9.61 2.13 7.88 4.16 7.26 6.67"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                    />
                                </svg>
                                Try Another Combination
                            </button>
                        </div>
                    </section>
                </main>
            </div>
        </div>

        <!-- Inline JavaScript -->
        <script>
            // Modern Virtual Try-On Interface JavaScript
            // Enhanced with liquid glass interactions and smooth animations

            class VirtualTryOnApp {
                constructor() {
                    this.personImageFile = null;
                    this.garmentImageFile = null;
                    this.isProcessing = false;

                    this.init();
                    this.createFloatingOrbs();
                    this.initAnimations();
                }

                init() {
                    this.bindEvents();
                    this.initDragAndDrop();
                    this.initParticleEffects();
                    this.preloadImages();
                }

                // Create floating orbs background
                createFloatingOrbs() {
                    const orbsContainer = document.createElement('div');
                    orbsContainer.className = 'floating-orbs';

                    for (let i = 0; i < 3; i++) {
                        const orb = document.createElement('div');
                        orb.className = 'orb';
                        orbsContainer.appendChild(orb);
                    }

                    document.body.appendChild(orbsContainer);
                }

                // Initialize animations
                initAnimations() {
                    // Animate elements on scroll
                    this.observeElements();

                    // Add mouse movement parallax
                    this.initParallax();

                    // Add button hover effects
                    this.enhanceButtons();
                }

                // Observe elements for scroll animations
                observeElements() {
                    const observer = new IntersectionObserver((entries) => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                entry.target.style.opacity = '1';
                                entry.target.style.transform = 'translateY(0)';
                            }
                        });
                    }, { threshold: 0.1 });

                    document.querySelectorAll('.upload-card, .instructions, .process-section').forEach(el => {
                        el.style.opacity = '0';
                        el.style.transform = 'translateY(30px)';
                        el.style.transition = 'all 0.6s ease-out';
                        observer.observe(el);
                    });
                }

                // Initialize parallax effect
                initParallax() {
                    document.addEventListener('mousemove', (e) => {
                        const { clientX, clientY } = e;
                        const { innerWidth, innerHeight } = window;

                        const xPercent = (clientX / innerWidth - 0.5) * 2;
                        const yPercent = (clientY / innerHeight - 0.5) * 2;

                        // Move floating orbs
                        document.querySelectorAll('.orb').forEach((orb, index) => {
                            const speed = (index + 1) * 0.5;
                            orb.style.transform = `translate(${xPercent * speed * 10}px, ${yPercent * speed * 10}px)`;
                        });

                        // Move glass cards slightly
                        document.querySelectorAll('.upload-card').forEach((card, index) => {
                            const speed = 0.2;
                            card.style.transform = `translate(${xPercent * speed * 2}px, ${yPercent * speed * 2}px)`;
                        });
                    });
                }

                // Enhance button interactions
                enhanceButtons() {
                    document.querySelectorAll('.upload-button, .process-button').forEach(button => {
                        button.addEventListener('mouseenter', (e) => {
                            this.createRipple(e);
                        });

                        button.addEventListener('click', (e) => {
                            this.createClickEffect(e);
                        });
                    });
                }

                // Create ripple effect
                createRipple(e) {
                    const button = e.currentTarget;
                    const rect = button.getBoundingClientRect();
                    const size = Math.max(rect.width, rect.height);
                    const ripple = document.createElement('div');

                    ripple.style.width = ripple.style.height = size + 'px';
                    ripple.style.left = (e.clientX - rect.left - size / 2) + 'px';
                    ripple.style.top = (e.clientY - rect.top - size / 2) + 'px';
                    ripple.style.position = 'absolute';
                    ripple.style.borderRadius = '50%';
                    ripple.style.background = 'rgba(255, 255, 255, 0.3)';
                    ripple.style.transform = 'scale(0)';
                    ripple.style.animation = 'ripple 0.6s linear';
                    ripple.style.pointerEvents = 'none';

                    button.appendChild(ripple);

                    setTimeout(() => {
                        ripple.remove();
                    }, 600);
                }

                // Create click effect
                createClickEffect(e) {
                    const button = e.currentTarget;
                    button.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        button.style.transform = '';
                    }, 150);
                }

                // Initialize particle effects
                initParticleEffects() {
                    // Particle effects are already handled in CSS
                }

                // Bind event listeners
                bindEvents() {
                    // Image upload handlers
                    document.getElementById('personImage').addEventListener('change', (e) => {
                        this.handleImageUpload(e, 'person');
                    });

                    document.getElementById('garmentImage').addEventListener('change', (e) => {
                        this.handleImageUpload(e, 'garment');
                    });

                    // Process button
                    document.getElementById('processButton').addEventListener('click', () => {
                        this.processImages();
                    });

                    // Predict measurements button
                    document.getElementById('predictButton').addEventListener('click', () => {
                        this.predictMeasurements();
                    });

                    // Upload button clicks
                    document.querySelectorAll('.upload-button').forEach(button => {
                        button.addEventListener('click', (e) => {
                            const card = e.target.closest('.upload-card');
                            const input = card.querySelector('.upload-input');
                            input.click();
                        });
                    });
                }

                // Handle image upload with animations
                handleImageUpload(e, type) {
                    const file = e.target.files[0];
                    if (!file) return;

                    // Validate file size
                    if (file.size > 10 * 1024 * 1024) {
                        this.showError(`${type} image file is too large. Please choose a file smaller than 10MB.`);
                        return;
                    }

                    // Store file reference
                    if (type === 'person') {
                        this.personImageFile = file;
                    } else {
                        this.garmentImageFile = file;
                    }

                    // Create preview with animation
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        const preview = document.getElementById(`${type}Preview`);
                        const card = preview.closest('.upload-card');

                        // Add loading animation
                        card.style.transform = 'scale(1.02)';
                        card.style.filter = 'blur(2px)';

                        setTimeout(() => {
                            preview.src = e.target.result;
                            preview.style.display = 'block';
                            preview.style.opacity = '0';
                            preview.style.transform = 'scale(0.8)';

                            // Animate preview appearance
                            requestAnimationFrame(() => {
                                preview.style.transition = 'all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55)';
                                preview.style.opacity = '1';
                                preview.style.transform = 'scale(1)';
                            });

                            // Reset card
                            card.style.transform = '';
                            card.style.filter = '';

                            // Create success particles
                            this.createSuccessParticles(card);
                        }, 300);
                    };

                    reader.readAsDataURL(file);
                    this.checkCanProcess();
                }

                // Create success particles
                createSuccessParticles(element) {
                    const rect = element.getBoundingClientRect();
                    const centerX = rect.left + rect.width / 2;
                    const centerY = rect.top + rect.height / 2;

                    for (let i = 0; i < 6; i++) {
                        setTimeout(() => {
                            const particle = document.createElement('div');
                            particle.className = 'particle';
                            particle.style.left = centerX + Math.random() * 40 - 20 + 'px';
                            particle.style.top = centerY + Math.random() * 40 - 20 + 'px';
                            document.body.appendChild(particle);

                            setTimeout(() => particle.remove(), 2000);
                        }, i * 100);
                    }
                }

                // Initialize drag and drop
                initDragAndDrop() {
                    ['personImage', 'garmentImage'].forEach(id => {
                        const card = document.querySelector(`#${id}`).closest('.upload-card');
                        const input = document.getElementById(id);

                        card.addEventListener('dragover', (e) => {
                            e.preventDefault();
                            card.style.borderColor = 'rgba(139, 95, 191, 0.8)';
                            card.style.background = 'linear-gradient(135deg, rgba(139, 95, 191, 0.2) 0%, rgba(106, 76, 147, 0.1) 100%)';
                            card.style.transform = 'scale(1.02)';
                        });

                        card.addEventListener('dragleave', (e) => {
                            e.preventDefault();
                            this.resetCardStyle(card);
                        });

                        card.addEventListener('drop', (e) => {
                            e.preventDefault();
                            this.resetCardStyle(card);

                            const files = e.dataTransfer.files;
                            if (files.length > 0) {
                                input.files = files;
                                input.dispatchEvent(new Event('change'));
                            }
                        });
                    });
                }

                // Reset card style
                resetCardStyle(card) {
                    card.style.borderColor = '';
                    card.style.background = '';
                    card.style.transform = '';
                }

                // Check if processing can be enabled
                checkCanProcess() {
                    const processButton = document.getElementById('processButton');
                    if (this.personImageFile && this.garmentImageFile && !this.isProcessing) {
                        processButton.disabled = false;
                        processButton.style.animation = 'pulse 2s infinite';
                    } else {
                        processButton.disabled = true;
                        processButton.style.animation = 'none';
                    }
                }

                // Show error message with animation
                showError(message) {
                    const errorElement = document.getElementById('errorMessage');
                    errorElement.textContent = message;
                    errorElement.style.display = 'block';
                    errorElement.style.animation = 'slideInDown 0.5s ease-out';

                    document.getElementById('successMessage').style.display = 'none';

                    // Auto hide after 5 seconds
                    setTimeout(() => {
                        errorElement.style.animation = 'slideInUp 0.5s ease-out reverse';
                        setTimeout(() => {
                            errorElement.style.display = 'none';
                        }, 500);
                    }, 5000);
                }

                // Show success message with animation
                showSuccess(message) {
                    const successElement = document.getElementById('successMessage');
                    successElement.textContent = message;
                    successElement.style.display = 'block';
                    successElement.style.animation = 'slideInDown 0.5s ease-out';

                    document.getElementById('errorMessage').style.display = 'none';

                    // Auto hide after 3 seconds
                    setTimeout(() => {
                        successElement.style.animation = 'slideInUp 0.5s ease-out reverse';
                        setTimeout(() => {
                            successElement.style.display = 'none';
                        }, 500);
                    }, 3000);
                }

                // Hide messages
                hideMessages() {
                    document.getElementById('errorMessage').style.display = 'none';
                    document.getElementById('successMessage').style.display = 'none';
                }

                // Show loading with enhanced animation
                showLoading() {
                    const loadingElement = document.getElementById('loading');
                    loadingElement.style.display = 'block';
                    loadingElement.style.animation = 'fadeIn 0.5s ease-out';

                    // Add random loading messages
                    const messages = [
                        'Analyzing your style...',
                        'Preparing the virtual fitting room...',
                        'AI is trying on your garment...',
                        'Adjusting the perfect fit...',
                        'Adding finishing touches...',
                        'Almost ready!'
                    ];

                    const messageElement = loadingElement.querySelector('p');
                    let messageIndex = 0;

                    const messageInterval = setInterval(() => {
                        messageElement.style.opacity = '0';
                        setTimeout(() => {
                            messageElement.textContent = messages[messageIndex % messages.length];
                            messageElement.style.opacity = '1';
                            messageIndex++;
                        }, 300);
                    }, 3000);

                    // Store interval to clear later
                    this.messageInterval = messageInterval;
                }

                // Hide loading
                hideLoading() {
                    const loadingElement = document.getElementById('loading');
                    loadingElement.style.animation = 'fadeOut 0.5s ease-out';
                    setTimeout(() => {
                        loadingElement.style.display = 'none';
                    }, 500);

                    if (this.messageInterval) {
                        clearInterval(this.messageInterval);
                    }
                }

                // Show results with dramatic animation
                showResults(imageData) {
                    const resultsSection = document.getElementById('results');
                    const resultImage = document.getElementById('resultImage');

                    resultImage.src = imageData;
                    resultsSection.style.display = 'block';
                    resultsSection.style.animation = 'zoomIn 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55)';

                    // Add image load animation
                    resultImage.onload = () => {
                        resultImage.style.animation = 'imageReveal 1s ease-out';
                        this.createCelebrationEffect();
                    };
                }

                // Create celebration effect
                createCelebrationEffect() {
                    const colors = ['#8B5FBF', '#667eea', '#f093fb', '#f5576c'];

                    for (let i = 0; i < 20; i++) {
                        setTimeout(() => {
                            const confetti = document.createElement('div');
                            confetti.style.position = 'fixed';
                            confetti.style.width = '10px';
                            confetti.style.height = '10px';
                            confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                            confetti.style.left = Math.random() * window.innerWidth + 'px';
                            confetti.style.top = '-10px';
                            confetti.style.borderRadius = '50%';
                            confetti.style.pointerEvents = 'none';
                            confetti.style.zIndex = '1000';
                            confetti.style.animation = 'confetti-fall 3s ease-out forwards';

                            document.body.appendChild(confetti);

                            setTimeout(() => confetti.remove(), 3000);
                        }, i * 100);
                    }
                }

                // Predict body measurements
                async predictMeasurements() {
                    console.log(' Starting measurement prediction...');
                    
                    const height = document.getElementById('height').value;
                    const weight = document.getElementById('weight').value;
                    const gender = document.getElementById('gender').value;

                    console.log(` Input values: height=${height}, weight=${weight}, gender=${gender}`);

                    // Validate inputs
                    if (!height || !weight) {
                        console.log(' Validation failed: missing height or weight');
                        this.showError('Please enter both height and weight.');
                        return;
                    }

                    if (height < 120 || height > 250) {
                        console.log(' Validation failed: height out of range');
                        this.showError('Height must be between 120-250 cm.');
                        return;
                    }

                    if (weight < 30 || weight > 300) {
                        console.log(' Validation failed: weight out of range');
                        this.showError('Weight must be between 30-300 kg.');
                        return;
                    }

                    // Show loading state
                    const predictButton = document.getElementById('predictButton');
                    const originalText = predictButton.innerHTML;
                    predictButton.innerHTML = '<span class="button-icon"></span><span class="button-text">Calculating...</span>';
                    predictButton.disabled = true;

                    try {
                        console.log(' Preparing form data...');
                        const formData = new FormData();
                        formData.append('height', height);
                        formData.append('weight', weight);
                        formData.append('gender', gender);

                        console.log(' Sending request to /predict-measurements');
                        const response = await fetch('/predict-measurements', {
                            method: 'POST',
                            body: formData
                        });

                        console.log(` Response status: ${response.status}`);
                        const result = await response.json();
                        console.log(' Response data:', result);

                        if (response.ok && result.success) {
                            console.log(' Prediction successful, displaying results');
                            this.displayPredictions(result);
                            this.showSuccess('Body measurements predicted successfully! ');
                        } else {
                            console.log(' Prediction failed:', result.error);
                            this.showError(result.error || 'Failed to predict measurements. Please try again.');
                        }
                    } catch (error) {
                        console.error(' Network error:', error);
                        this.showError('Network error. Please check your connection and try again.');
                    } finally {
                        predictButton.innerHTML = originalText;
                        predictButton.disabled = false;
                    }
                }

                // Display prediction results
                displayPredictions(result) {
                    const predictionsDisplay = document.getElementById('predictionsDisplay');
                    const predictionsGrid = document.getElementById('predictionsGrid');
                    
                    const measurements = result.body_measurements;
                    const recommendations = result.size_recommendations;

                    // Create prediction items
                    const predictionItems = [
                        { label: 'BMI', value: `${measurements.bmi} (${recommendations.bmi_category})` },
                        { label: 'Chest', value: `${measurements.chest_cm} cm` },
                        { label: 'Waist', value: `${measurements.waist_cm} cm` },
                        { label: 'Hip', value: `${measurements.hip_cm} cm` },
                        { label: 'Shoulders', value: `${measurements.shoulder_width_cm} cm` },
                        { label: 'Neck', value: `${measurements.neck_cm} cm` },
                        { label: 'Arm Length', value: `${measurements.arm_length_cm} cm` },
                        { label: 'Inseam', value: `${measurements.inseam_cm} cm` },
                        { label: 'Thigh', value: `${measurements.thigh_cm} cm` },
                        { label: 'Calf', value: `${measurements.calf_cm} cm` },
                        { label: 'Shirt Size', value: recommendations.shirt_size },
                        { label: 'Pant Size', value: recommendations.pant_size },
                        { label: 'Dress Size', value: recommendations.dress_size },
                        { label: 'Shoe Size', value: recommendations.shoe_size },
                        { label: 'Body Fat', value: `${measurements.body_fat_percentage}%` },
                        { label: 'Ideal Weight', value: recommendations.ideal_weight }
                    ];

                    // Clear previous results
                    predictionsGrid.innerHTML = '';

                    // Add prediction items with animation
                    predictionItems.forEach((item, index) => {
                        const predictionItem = document.createElement('div');
                        predictionItem.className = 'prediction-item';
                        predictionItem.style.opacity = '0';
                        predictionItem.style.transform = 'translateY(20px)';
                        
                        predictionItem.innerHTML = `
                            <div class="prediction-label">${item.label}</div>
                            <div class="prediction-value">${item.value}</div>
                        `;
                        
                        predictionsGrid.appendChild(predictionItem);

                        // Animate in with delay
                        setTimeout(() => {
                            predictionItem.style.transition = 'all 0.5s ease-out';
                            predictionItem.style.opacity = '1';
                            predictionItem.style.transform = 'translateY(0)';
                        }, index * 100);
                    });

                    // Show predictions display
                    predictionsDisplay.style.display = 'block';
                    
                    // Scroll to predictions
                    setTimeout(() => {
                        predictionsDisplay.scrollIntoView({
                            behavior: 'smooth',
                            block: 'center'
                        });
                    }, 500);
                }

                // Process images with enhanced UX
                async processImages() {
                    if (!this.personImageFile || !this.garmentImageFile || this.isProcessing) {
                        this.showError('Please upload both person and garment images.');
                        return;
                    }

                    this.isProcessing = true;
                    this.hideMessages();
                    this.showLoading();

                    // Disable process button with animation
                    const processButton = document.getElementById('processButton');
                    processButton.disabled = true;
                    processButton.style.animation = 'none';
                    processButton.style.transform = 'scale(0.95)';

                    // Hide results section
                    document.getElementById('results').style.display = 'none';

                    try {
                        const formData = new FormData();
                        formData.append('person_image', this.personImageFile);
                        formData.append('garment_image', this.garmentImageFile);
                        
                        // Add body measurements if available
                        const height = document.getElementById('height').value;
                        const weight = document.getElementById('weight').value;
                        const gender = document.getElementById('gender').value;
                        
                        if (height && weight) {
                            formData.append('height', height);
                            formData.append('weight', weight);
                            formData.append('gender', gender);
                        } else {
                            // Use default values if not provided
                            formData.append('height', '175');
                            formData.append('weight', '70');
                            formData.append('gender', 'unisex');
                        }

                        const response = await fetch('/process', {
                            method: 'POST',
                            body: formData
                        });

                        const result = await response.json();

                        if (response.ok && result.success) {
                            this.showResults(result.result_image);
                            
                            // Display body measurements if available
                            if (result.body_measurements) {
                                this.displayMeasurementsInResults(result);
                            }
                            
                            this.showSuccess('Virtual try-on completed successfully! ');

                            // Scroll to results smoothly
                            setTimeout(() => {
                                document.getElementById('results').scrollIntoView({
                                    behavior: 'smooth',
                                    block: 'center'
                                });
                            }, 500);
                        } else {
                            this.showError(result.error || 'Failed to process images. Please try again.');
                        }
                    } catch (error) {
                        console.error('Error:', error);
                        this.showError('Network error. Please check your connection and try again.');
                    } finally {
                        this.isProcessing = false;
                        this.hideLoading();
                        processButton.style.transform = '';
                        this.checkCanProcess();
                    }
                }

                // Display measurements in results section
                displayMeasurementsInResults(result) {
                    // Update or show the predictions display with the measurements from the try-on result
                    if (result.body_measurements && result.size_recommendations) {
                        this.displayPredictions(result);
                    }
                }

                // Preload images for better performance
                preloadImages() {
                    const imageUrls = [
                        // Add any placeholder images or icons here
                    ];

                    imageUrls.forEach(url => {
                        const img = new Image();
                        img.src = url;
                    });
                }
            }

            // Initialize app when DOM is loaded
            document.addEventListener('DOMContentLoaded', () => {
                window.virtualTryOnApp = new VirtualTryOnApp();
            });

            // Add smooth scrolling and page transitions
            window.addEventListener('beforeunload', () => {
                document.body.style.opacity = '0';
                document.body.style.transform = 'scale(0.95)';
            });

            // Performance monitoring
            if ('performance' in window) {
                window.addEventListener('load', () => {
                    const perfData = performance.timing;
                    const pageLoadTime = perfData.loadEventEnd - perfData.navigationStart;
                    console.log(`Page loaded in ${pageLoadTime}ms`);
                });
            }

            // Add keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                // Press 'R' to reset uploads
                if (e.key === 'r' || e.key === 'R') {
                    if (e.ctrlKey || e.metaKey) {
                        e.preventDefault();
                        location.reload();
                    }
                }

                // Press Space to process (if ready)
                if (e.code === 'Space' && e.target === document.body) {
                    e.preventDefault();
                    const processButton = document.getElementById('processButton');
                    if (!processButton.disabled) {
                        processButton.click();
                    }
                }
            });

            // Export for potential module usage
            if (typeof module !== 'undefined' && module.exports) {
                module.exports = VirtualTryOnApp;
            }
        </script>

        <!-- Accessibility Skip Link -->
        <a href="#main-content" class="skip-link">Skip to main content</a>

        <!-- Additional Helper Functions -->
        <script>
            // Check API provider status on page load
            async function checkProviderStatus() {
                try {
                    const response = await fetch("/api/status");
                    const data = await response.json();

                    const providerBadge =
                        document.getElementById("providerBadge");
                    const statusText = document.getElementById("statusText");

                    if (data.primary_provider === "AI Processing") {
                        providerBadge.textContent = "AI Processing";
                        providerBadge.className =
                            "provider-badge ai-processing";
                        statusText.textContent =
                            "Using advanced AI processing for enhanced virtual try-on results";
                    } else if (data.primary_provider === "Fallback Service") {
                        providerBadge.textContent = "Standard Processing";
                        providerBadge.className = "provider-badge fallback";
                        statusText.textContent =
                            "Using standard processing service for virtual try-on";
                    } else {
                        providerBadge.textContent = "Processing Service";
                        providerBadge.className = "provider-badge standard";
                        statusText.textContent =
                            "Ready for virtual try-on processing";
                    }
                } catch (error) {
                    console.error("Failed to check provider status:", error);
                    const providerBadge =
                        document.getElementById("providerBadge");
                    const statusText = document.getElementById("statusText");
                    providerBadge.textContent = "Error";
                    providerBadge.className = "provider-badge loading";
                    statusText.textContent = "Unable to determine API status";
                }
            }

            // Call on page load
            document.addEventListener("DOMContentLoaded", checkProviderStatus);

            // Download result image
            function downloadResult() {
                const image = document.getElementById("resultImage");
                if (image.src) {
                    const link = document.createElement("a");
                    link.download = "virtual-tryon-result.jpg";
                    link.href = image.src;
                    link.click();
                }
            }

            // Reset interface
            function resetInterface() {
                if (
                    confirm(
                        "Are you sure you want to start over? This will clear your current images and result.",
                    )
                ) {
                    location.reload();
                }
            }

            // Keyboard accessibility
            document.addEventListener("keydown", function (e) {
                // Alt + U to focus upload buttons
                if (e.altKey && e.key === "u") {
                    e.preventDefault();
                    document.querySelector(".upload-button").focus();
                }

                // Alt + P to focus process button
                if (e.altKey && e.key === "p") {
                    e.preventDefault();
                    const processBtn = document.getElementById("processButton");
                    if (!processBtn.disabled) {
                        processBtn.focus();
                    }
                }
            });

            // Performance observer for monitoring
            if ("PerformanceObserver" in window) {
                const observer = new PerformanceObserver((list) => {
                    for (const entry of list.getEntries()) {
                        if (entry.name.includes("image")) {
                            console.log(
                                `Image loaded: ${entry.name} in ${entry.duration}ms`,
                            );
                        }
                    }
                });
                observer.observe({ entryTypes: ["resource"] });
            }
        </script>

        <!-- Schema.org structured data -->
        <script type="application/ld+json">
            {
                "@context": "https://schema.org",
                "@type": "SoftwareApplication",
                "name": "Virtual Try-On Interface",
                "applicationCategory": "MultimediaApplication",
                "operatingSystem": "Web Browser",
                "description": "AI-powered virtual clothing try-on application using advanced machine learning",
                "author": {
                    "@type": "Organization",
                    "name": "Zylo Solutions"
                }
            }
        </script>
    </body>
</html>